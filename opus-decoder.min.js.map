{"version":3,"names":["global","factory","this","exports","Worker","WASMAudioDecoderCommon","caller","uint8Array","Uint8Array","float32Array","Float32Array","modules","Object","defineProperties","value","WeakMap","setModule","Ref","module","set","Promise","resolve","getModule","wasmString","get","WebAssembly","compile","decodeDynString","wasm","inflateDynEncodeString","then","data","concatFloat32","buffers","length","ret","i","offset","getDecodedAudio","channelData","samplesDecoded","sampleRate","bitDepth","getDecodedAudioMultiChannel","input","channelsDecoded","j","channel","push","source","output","parseInt","substring","offsetReverse","byte","escaped","byteIndex","charCodeAt","subarray","puffString","String","raw","instantiate","instanceExports","Map","entries","puff","memory","dataArray","heapView","DataView","heapPos","sourceLength","sourceLengthPtr","setInt32","sourcePtr","destLengthPtr","byteLength","slice","getInt32","defineProperty","enumerable","_wasm","getOutputChannels","outputData","allocateTypedArray","len","TypedArray","setPointer","ptr","_malloc","BYTES_PER_ELEMENT","_pointers","add","buf","HEAP","free","forEach","_free","clear","_module","_EmscriptenWASM","_inputSize","_outputChannels","_outputChannelSize","Set","ready","_input","_output","WASMAudioDecoderWorker","constructor","options","name","Decoder","EmscriptenWASM","webworkerSourceCode","_Decoder","_WASMAudioDecoderCommon","decoder","moduleResolve","modulePromise","self","onmessage","id","command","transferList","messagePromise","messagePayload","isWebWorker","reset","assign","Array","isArray","map","buffer","postMessage","type","URL","createObjectURL","Blob","Buffer","from","toString","super","_id","Number","MIN_SAFE_INTEGER","_enqueuedOperations","rest","delete","_postToDecoder","async","finally","terminate","base64ReverseLookup","HEAPU8","_opus_frame_decoder_create","_opus_frame_decode_float_deinterleaved","_opus_frame_decoder_destroy","imports","a","b","x","Math","cos","exp","d","dest","src","num","copyWithin","c","requestedSize","what","abort","instance","asm","initRuntime","OpusDecoder","errors","_init","common","_common","mapping","_channels","_channelMappingTable","_decoder","_streamCount","_coupledStreamCount","_preSkip","_forceStereo","_ready","_decode","opusFrame","Error","console","error","outputBuffer","decodeFrame","decoded","decodeFrames","opusFrames","outputBuffers","outputSamples","_isWebWorker","isNumber","param","channels","streamCount","coupledStreamCount","channelMappingTable","preSkip","forceStereo","OpusDecoderWebWorker","require","define","amd","globalThis"],"sources":["opus-decoder.js"],"mappings":"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"}